# Telegram News Bot с AI-анализом

Этот бот собирает новости из различных RSS-лент, анализирует их с помощью AI (Groq API) и предоставляет краткий отчет прямо в Telegram.

## Возможности

*   **Сбор новостей из RSS-лент**: Автоматически извлекает последние новости из заданных источников.
*   **AI-анализ новостей**: Использует Groq API для генерации структурированных отчетов по новостям, включая основные темы, главные события, тренды и выводы.
*   **Удобный Telegram-интерфейс**: Простой и интуитивно понятный интерфейс для взаимодействия с ботом.
*   **Защита от спама**: Встроенный ограничитель запросов (`cooldown`) для предотвращения злоупотребления API.

## Установка и запуск

Для запуска бота в Google Colab выполните следующие шаги:

1.  **Откройте блокнот в Google Colab**.

2.  **Установите зависимости**: Запустите первую ячейку (`ЯЧЕЙКА 1`).

    ```python
    !pip install -q python-telegram-bot==20.7 aiohttp==3.9.1 beautifulsoup4==4.12.2 python-dotenv==1.0.0 lxml==4.9.3 tenacity==8.2.3 html2text==2020.1.16
    ```

3.  **Настройте токены API**: Запустите вторую ячейку (`ЯЧЕЙКА 2`). Вам нужно будет добавить два секрета в Google Colab:

    *   `TELEGRAM_BOT_TOKEN`: Токен вашего Telegram-бота, полученный от BotFather.
    *   `GROQ_API_KEY`: Ваш API-ключ от Groq для AI-анализа. Получить его можно здесь: https://console.groq.com/keys.

    ```python
    from google.colab import userdata
    import os

    os.environ['TELEGRAM_BOT_TOKEN'] = userdata.get('TELEGRAM_BOT_TOKEN')
    os.environ['GROQ_API_KEY'] = userdata.get('GROQ_API_KEY')
    ```

4.  **Запустите бота**: Запустите третью ячейку (`ЯЧЕЙКА 3`). После этого бот будет запущен и готов принимать команды.

    ```python
    # ... код бота ...
    await application.run_polling()
    ```

## Использование

Откройте ваш бот в Telegram и используйте следующие команды:

*   `/start`: Приветственное сообщение и краткая справка.
*   `/news`: Получить свежий анализ новостей из подключенных RSS-лент.
*   `/status`: Проверить количество подключенных RSS-каналов.

## Конфигурация

Основные параметры конфигурации можно найти в файле `config.py`, который генерируется в ячейке 2:

*   `TELEGRAM_TOKEN`: Токен Telegram-бота (автоматически загружается из секретов).
*   `GROQ_API_KEY`: API-ключ Groq (автоматически загружается из секретов).
*   `RSS_FEEDS_FILE`: Имя файла с RSS-лентами (`rss_feeds.txt`).
*   `MAX_NEWS_ITEMS`: Максимальное количество новостей для обработки.
*   `MAX_CHARS_FOR_ANALYSIS`: Максимальное количество символов новостного текста, передаваемого на анализ AI.
*   `TG_MAX_MESSAGE_LENGTH`: Максимальная длина сообщения в Telegram.
*   `COMMAND_COOLDOWN_SECONDS`: Время в секундах между запросами к боту от одного пользователя.

### Добавление/удаление RSS-лент

Отредактируйте файл `rss_feeds.txt` в файловой системе Colab. Каждая ссылка на RSS-ленту должна быть на новой строке. Пустые строки и строки, начинающиеся с `#`, игнорируются.

Пример `rss_feeds.txt`:

```
https://lenta.ru/rss/news
https://meduza.io/rss/all
# https://example.com/another_feed.xml
```

После изменения файла `rss_feeds.txt` вам потребуется перезапустить ячейку 3, чтобы изменения вступили в силу.

